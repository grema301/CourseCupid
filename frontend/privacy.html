<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Privacy Policy • Course Cupid</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
<script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            cupidPink: '#C05A66',
            cupidCream: '#FAF5EF',
          },
          fontFamily: {
            script: ['"Great Vibes"', 'cursive'],
            sans: ['Inter', 'sans-serif'],
          },
          animation: {
            'fade-in': 'fadeIn 0.6s ease-out',
            'slide-up': 'slideUp 0.8s ease-out',
            'slide-left': 'slideLeft 0.8s ease-out',
            'slide-right': 'slideRight 0.8s ease-out',
            'float': 'float 3s ease-in-out infinite',
            'pulse-slow': 'pulse 3s infinite',
            'bounce-gentle': 'bounceGentle 2s infinite',
            'scale-in': 'scaleIn 0.6s ease-out',
            'shake': 'shake 0.5s ease-in-out',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' }
            },
            slideUp: {
              '0%': { opacity: '0', transform: 'translateY(30px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' }
            },
            slideLeft: {
              '0%': { opacity: '0', transform: 'translateX(-30px)' },
              '100%': { opacity: '1', transform: 'translateX(0)' }
            },
            slideRight: {
              '0%': { opacity: '0', transform: 'translateX(30px)' },
              '100%': { opacity: '1', transform: 'translateX(0)' }
            },
            float: {
              '0%, 100%': { transform: 'translateY(0px)' },
              '50%': { transform: 'translateY(-10px)' }
            },
            bounceGentle: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-5px)' }
            },
            scaleIn: {
              '0%': { opacity: '0', transform: 'scale(0.9)' },
              '100%': { opacity: '1', transform: 'scale(1)' }
            },
            shake: {
              '0%, 100%': { transform: 'translateX(0)' },
              '25%': { transform: 'translateX(-5px)' },
              '75%': { transform: 'translateX(5px)' }
            }
          }
        }
      }
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    .hover-lift {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .hover-lift:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px -5px rgba(192, 90, 102, 0.2);
    }

    .gradient-bg {
      background: linear-gradient(135deg, #FAF5EF 0%, #f8f1e8 100%);
    }

    .animated-gradient {
      background: linear-gradient(-45deg, #C05A66, #d67580, #C05A66, #b8525c);
      background-size: 400% 400%;
      animation: gradientShift 6s ease infinite;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .glass-effect {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(192, 90, 102, 0.1);
    }

    .input-focus {
      transition: all 0.3s ease;
    }

    .input-focus:focus {
      transform: translateY(-1px);
      box-shadow: 0 8px 25px -8px rgba(192, 90, 102, 0.3);
      border-color: #C05A66;
    }

    .loading-spinner {
      border: 2px solid transparent;
      border-top: 2px solid currentColor;
      border-radius: 50%;
      width: 16px;
      height: 16px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .animate-on-scroll {
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.6s ease-out;
    }

    .animate-on-scroll.animate {
      opacity: 1;
      transform: translateY(0);
    }

    .hero-gradient {
      background: linear-gradient(135deg, rgba(192, 90, 102, 0.1) 0%, rgba(250, 245, 239, 0.8) 100%);
    }

    @media (max-width: 768px) {
      .mobile-stack {
        flex-direction: column;
        gap: 1rem;
      }
    }
  </style>
</head>
<body class="bg-cupidCream min-h-screen text-slate-900 flex flex-col">

  <header class="flex items-center justify-between px-8 py-6">
    <a href="index.html" class="flex items-center gap-3">
      <img src="images/cupid_logo.png" alt="Course Cupid" class="h-8">
      <span class="text-lg font-semibold text-cupidPink">Course Cupid</span>
    </a>
    <nav class="hidden md:flex gap-6 lg:gap-10 text-sm">
      <a href="index.html" class="hover:text-cupidPink transition-all duration-300 hover:scale-105 relative group">
        Home
        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-cupidPink transition-all duration-300 group-hover:w-full"></span>
      </a>
      <a href="aboutus.html" class="hover:text-cupidPink transition-all duration-300 hover:scale-105 relative group">
        About Us
        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-cupidPink transition-all duration-300 group-hover:w-full"></span>
      </a>
      <a href="quiz.html" class="hover:text-cupidPink transition-all duration-300 hover:scale-105 relative group">
        Quiz
        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-cupidPink transition-all duration-300 group-hover:w-full"></span>
      </a>
      <a href="papers.html" class="hover:text-cupidPink transition-all duration-300 hover:scale-105 relative group">
        Papers
        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-cupidPink transition-all duration-300 group-hover:w-full"></span>
      </a>
      <a href="/chat/default" class="hover:text-cupidPink transition-all duration-300 hover:scale-105 relative group">
        Chatbot
        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-cupidPink transition-all duration-300 group-hover:w-full"></span>
      </a>
      <a href="contact.html" class="hover:text-cupidPink transition-all duration-300 hover:scale-105 relative group">
        Contact
        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-cupidPink transition-all duration-300 group-hover:w-full"></span>
      </a>
    </nav>
<div id="auth-controls" class="flex items-center gap-4">
      <div id="auth-guest" class="flex gap-3 items-center">
        <a id="login-link" href="login.html" class="px-4 py-2 rounded-full bg-cupidPink/10 text-cupidPink hover:bg-cupidPink/20 font-medium">Log In</a>
        <a id="signup-link" href="signup.html" class="px-4 py-2 rounded-full bg-cupidPink text-white font-semibold">Register</a>
      </div>
      <div id="auth-user" class="hidden relative flex items-center gap-2">
        <div id="profile-btn" class="flex items-center gap-2 bg-white border border-cupidPink/20 rounded-full px-2 py-1 shadow-sm cursor-pointer">
          <div id="user-avatar" class="w-8 h-8 rounded-full bg-cupidPink text-white flex items-center justify-center font-semibold text-sm"></div>
          <span id="user-name" class="text-cupidPink font-medium text-sm max-w-[120px] truncate"></span>
        </div>
        <div id="profile-menu"
             class="absolute right-0 top-full mt-2 w-44 bg-white rounded-lg shadow-lg border border-cupidPink/10 z-50 overflow-hidden
                    transform transition-all duration-150 origin-top-right opacity-0 -translate-y-2 scale-95 pointer-events-none">
          <div class="py-1">
            <a href="settings.html" class="block px-4 py-2 text-sm text-cupidPink hover:bg-cupidPink/5">Settings</a>
            <button id="logout-btn" class="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50">Logout</button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="flex-1 px-8 py-12">
    <div class="max-w-4xl mx-auto">
      
      <div class="mb-8">
        <h1 class="ext-5xl sm:text-6xl lg:text-7xl font-script text-cupidPink mb-6 animate-float">Privacy Policy</h1>
        <p class="text-gray-600">Last updated: October 7, 2025</p>
      </div>

      <div class="bg-white rounded-xl p-6 mb-6 border border-cupidPink/10">
        <p class="text-gray-700 leading-relaxed">
          At Course Cupid, we take your privacy seriously. This Privacy Policy explains how we collect, use, disclose, and safeguard your 
          information when you use our course recommendation platform. Please read this policy carefully to understand our practices regarding 
          your personal data.
        </p>
      </div>

      <div class="space-y-6">

        <section class="bg-white rounded-xl p-6 border border-cupidPink/10">
          <h2 class="text-2xl font-semibold text-cupidPink mb-4">1. Information We Collect</h2>
          <div class="prose prose-gray max-w-none">
            
            <h3 class="text-lg font-semibold text-gray-800 mb-2">1.1 Personal Information</h3>
            <p class="text-gray-700 mb-2">When you register for an account or use our services, we may collect:</p>
            <ul class="list-disc list-inside text-gray-700 space-y-2 mb-4">
              <li>Name and username</li>
              <li>Email address</li>
              <li>Student ID (optional, if provided)</li>
              <li>Academic interests and preferences</li>
              <li>Course history and selections</li>
              <li>Quiz responses and assessment results</li>
            </ul>

            <h3 class="text-lg font-semibold text-gray-800 mb-2">1.2 Usage Information</h3>
            <p class="text-gray-700 mb-2">We automatically collect certain information when you use Course Cupid:</p>
            <ul class="list-disc list-inside text-gray-700 space-y-2 mb-4">
              <li>Device information (type, operating system, browser)</li>
              <li>IP address and location data</li>
              <li>Pages viewed and features used</li>
              <li>Time and date of visits</li>
              <li>Referring website addresses</li>
              <li>Chat interactions with our AI chatbot</li>
            </ul>

            <h3 class="text-lg font-semibold text-gray-800 mb-2">1.3 Cookies and Tracking</h3>
            <p class="text-gray-700">
              We use cookies and similar tracking technologies to enhance your experience, analyze site traffic, and understand user behavior. 
              See our Cookie Policy section below for more details.
            </p>
          </div>
        </section>

        <section class="bg-white rounded-xl p-6 border border-cupidPink/10">
          <h2 class="text-2xl font-semibold text-cupidPink mb-4">2. How We Use Your Information</h2>
          <div class="prose prose-gray max-w-none">
            <p class="text-gray-700 mb-3">We use the information we collect to:</p>
            <ul class="list-disc list-inside text-gray-700 space-y-2">
              <li>Provide personalized course recommendations</li>
              <li>Create and maintain your user account</li>
              <li>Improve and optimize our AI algorithms</li>
              <li>Analyze usage patterns and enhance user experience</li>
              <li>Send you important updates about the service</li>
              <li>Respond to your inquiries and support requests</li>
              <li>Prevent fraud and enhance security</li>
              <li>Comply with legal obligations</li>
              <li>Conduct research and analytics to improve our services</li>
            </ul>
          </div>
        </section>

        <section class="bg-white rounded-xl p-6 border border-cupidPink/10">
          <h2 class="text-2xl font-semibold text-cupidPink mb-4">3. How We Share Your Information</h2>
          <div class="prose prose-gray max-w-none">
            <p class="text-gray-700 mb-3">
              We do not sell your personal information. We may share your information only in the following circumstances:
            </p>
            
            <h3 class="text-lg font-semibold text-gray-800 mb-2">3.1 Service Providers</h3>
            <p class="text-gray-700 mb-4">
              We may share information with third-party service providers who help us operate our platform (hosting, analytics, email services). 
              These providers are contractually obligated to protect your data and use it only for the purposes we specify.
            </p>

            <h3 class="text-lg font-semibold text-gray-800 mb-2">3.2 University of Otago</h3>
            <p class="text-gray-700 mb-4">
              We may share aggregated, anonymized data with the University of Otago for research and improvement of student services. 
              We do not share personally identifiable information without your explicit consent.
            </p>

            <h3 class="text-lg font-semibold text-gray-800 mb-2">3.3 Legal Requirements</h3>
            <p class="text-gray-700 mb-4">
              We may disclose your information if required by law or in response to valid legal requests from public authorities.
            </p>

            <h3 class="text-lg font-semibold text-gray-800 mb-2">3.4 Business Transfers</h3>
            <p class="text-gray-700">
              If Course Cupid is involved in a merger, acquisition, or sale of assets, your information may be transferred as part of that transaction.
            </p>
          </div>
        </section>

        <section class="bg-white rounded-xl p-6 border border-cupidPink/10">
          <h2 class="text-2xl font-semibold text-cupidPink mb-4">4. Data Security</h2>
          <div class="prose prose-gray max-w-none">
            <p class="text-gray-700 mb-3">
              We implement appropriate technical and organizational measures to protect your personal information against unauthorized access, 
              alteration, disclosure, or destruction. These measures include:
            </p>
            <ul class="list-disc list-inside text-gray-700 space-y-2 mb-4">
              <li>Encryption of data in transit and at rest</li>
              <li>Regular security assessments and updates</li>
              <li>Access controls and authentication</li>
              <li>Secure data storage and backup systems</li>
              <li>Employee training on data protection</li>
            </ul>
            <p class="text-gray-700">
              However, no method of transmission over the internet is 100% secure. While we strive to protect your personal information, 
              we cannot guarantee absolute security.
            </p>
          </div>
        </section>

        <section class="bg-white rounded-xl p-6 border border-cupidPink/10">
          <h2 class="text-2xl font-semibold text-cupidPink mb-4">5. Your Rights and Choices</h2>
          <div class="prose prose-gray max-w-none">
            <p class="text-gray-700 mb-3">You have the following rights regarding your personal data:</p>
            
            <h3 class="text-lg font-semibold text-gray-800 mb-2">5.1 Access and Portability</h3>
            <p class="text-gray-700 mb-4">
              You can request a copy of your personal data in a structured, commonly used format.
            </p>

            <h3 class="text-lg font-semibold text-gray-800 mb-2">5.2 Correction</h3>
            <p class="text-gray-700 mb-4">
              You can update or correct your personal information through your account settings or by contacting us.
            </p>

            <h3 class="text-lg font-semibold text-gray-800 mb-2">5.3 Deletion</h3>
            <p class="text-gray-700 mb-4">
              You can request deletion of your account and personal data. Some information may be retained for legal or legitimate business purposes.
            </p>

            <h3 class="text-lg font-semibold text-gray-800 mb-2">5.4 Opt-Out</h3>
            <p class="text-gray-700 mb-4">
              You can opt out of marketing communications by following the unsubscribe link in emails or adjusting your account preferences.
            </p>

            <h3 class="text-lg font-semibold text-gray-800 mb-2">5.5 Cookie Control</h3>
            <p class="text-gray-700">
              You can control cookies through your browser settings. Note that disabling cookies may affect site functionality.
            </p>
          </div>
        </section>

        <section class="bg-white rounded-xl p-6 border border-cupidPink/10">
          <h2 class="text-2xl font-semibold text-cupidPink mb-4">6. Cookie Policy</h2>
          <div class="prose prose-gray max-w-none">
            <p class="text-gray-700 mb-3">We use the following types of cookies:</p>
            
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Essential Cookies</h3>
            <p class="text-gray-700 mb-4">
              Required for the website to function properly (authentication, security). These cannot be disabled.
            </p>

            <h3 class="text-lg font-semibold text-gray-800 mb-2">Functional Cookies</h3>
            <p class="text-gray-700 mb-4">
              Remember your preferences and settings to enhance your experience.
            </p>

            <h3 class="text-lg font-semibold text-gray-800 mb-2">Analytics Cookies</h3>
            <p class="text-gray-700 mb-4">
              Help us understand how visitors use our site so we can improve it.
            </p>

            <h3 class="text-lg font-semibold text-gray-800 mb-2">Managing Cookies</h3>
            <p class="text-gray-700">
              You can manage cookie preferences through your browser settings. Most browsers allow you to refuse or accept cookies.
            </p>
          </div>
        </section>

        <section class="bg-white rounded-xl p-6 border border-cupidPink/10">
          <h2 class="text-2xl font-semibold text-cupidPink mb-4">7. Children's Privacy</h2>
          <div class="prose prose-gray max-w-none">
            <p class="text-gray-700">
              Course Cupid is intended for users aged 13 and older. We do not knowingly collect personal information from children under 13. 
              If you are under 13, please do not use our service. If we become aware that we have collected personal information from a child 
              under 13, we will take steps to delete that information promptly.
            </p>
          </div>
        </section>

        <section class="bg-white rounded-xl p-6 border border-cupidPink/10">
          <h2 class="text-2xl font-semibold text-cupidPink mb-4">8. International Data Transfers</h2>
          <div class="prose prose-gray max-w-none">
            <p class="text-gray-700">
              Your information may be transferred to and processed in countries other than New Zealand. These countries may have different 
              data protection laws. We ensure appropriate safeguards are in place to protect your data in accordance with this Privacy Policy 
              and applicable laws.
            </p>
          </div>
        </section>

        <section class="bg-white rounded-xl p-6 border border-cupidPink/10">
          <h2 class="text-2xl font-semibold text-cupidPink mb-4">9. Data Retention</h2>
          <div class="prose prose-gray max-w-none">
            <p class="text-gray-700 mb-3">
              We retain your personal information for as long as necessary to provide our services and fulfill the purposes outlined in this policy. 
              Retention periods depend on:
            </p>
            <ul class="list-disc list-inside text-gray-700 space-y-2">
              <li>The nature of the information</li>
              <li>Legal and regulatory requirements</li>
              <li>Whether you have an active account</li>
              <li>Our legitimate business needs</li>
            </ul>
          </div>
        </section>

        <section class="bg-white rounded-xl p-6 border border-cupidPink/10">
          <h2 class="text-2xl font-semibold text-cupidPink mb-4">10. Changes to This Privacy Policy</h2>
          <div class="prose prose-gray max-w-none">
            <p class="text-gray-700">
              We may update this Privacy Policy from time to time. We will notify you of any material changes by posting the new policy on this page 
              and updating the "Last Updated" date. We encourage you to review this policy periodically.
            </p>
          </div>
        </section>

        <section class="bg-white rounded-xl p-6 border border-cupidPink/10">
          <h2 class="text-2xl font-semibold text-cupidPink mb-4">11. Contact Us</h2>
          <div class="prose prose-gray max-w-none">
            <p class="text-gray-700 mb-3">
              If you have questions about this Privacy Policy or wish to exercise your privacy rights, please contact us:
            </p>
            <ul class="list-none text-gray-700 space-y-2">
              <li><strong>Email:</strong> privacy@coursecupid.co.nz</li>
              <li><strong>Website:</strong> <a href="contact.html" class="text-cupidPink hover:underline">Contact Form</a></li>
              <li><strong>Mail:</strong> Course Cupid Privacy Team, University of Otago, Dunedin, New Zealand</li>
            </ul>
          </div>
        </section>

      </div>

      <div class="mt-8 bg-cupidPink/5 border border-cupidPink/20 rounded-xl p-6">
        <p class="text-gray-700 text-center">
          By using Course Cupid, you consent to the collection and use of your information as described in this Privacy Policy.
        </p>
      </div>

    </div>
  </main>

  <footer class="bg-white border-t border-cupidPink/10 mt-auto">
    <div class="max-w-6xl mx-auto px-8 py-12">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8">
        <div class="lg:col-span-1">
          <div class="flex items-center gap-3 mb-4">
            <img src="images/cupid_logo.png" alt="Course Cupid" class="h-8">
            <span class="text-lg font-semibold text-cupidPink">Course Cupid</span>
          </div>
          <p class="text-sm text-gray-600 mb-4">Helping students find their perfect course match at the University of Otago.</p>
        </div>
        <div>
          <h3 class="font-semibold text-cupidPink mb-4">Quick Links</h3>
          <ul class="space-y-2 text-sm">
            <li><a href="index.html" class="text-gray-600 hover:text-cupidPink transition-colors">Home</a></li>
            <li><a href="aboutus.html" class="text-gray-600 hover:text-cupidPink transition-colors">About Us</a></li>
            <li><a href="quiz.html" class="text-gray-600 hover:text-cupidPink transition-colors">Quiz</a></li>
            <li><a href="papers.html" class="text-gray-600 hover:text-cupidPink transition-colors">Papers</a></li>
          </ul>
        </div>
        <div>
          <h3 class="font-semibold text-cupidPink mb-4">Resources</h3>
          <ul class="space-y-2 text-sm">
            <li><a href="faq.html" class="text-gray-600 hover:text-cupidPink transition-colors">FAQ</a></li>
            <li><a href="contact.html" class="text-gray-600 hover:text-cupidPink transition-colors">Contact</a></li>
          </ul>
        </div>
        <div>
          <h3 class="font-semibold text-cupidPink mb-4">Legal</h3>
          <ul class="space-y-2 text-sm">
            <li><a href="terms.html" class="text-gray-600 hover:text-cupidPink transition-colors">Terms & Conditions</a></li>
            <li><a href="privacy.html" class="text-gray-600 hover:text-cupidPink transition-colors">Privacy Policy</a></li>
          </ul>
        </div>
      </div>
      <div class="border-t border-cupidPink/10 pt-8 flex flex-col md:flex-row justify-between items-center gap-4">
        <p class="text-sm text-gray-500">© <span class="copyright-year">2025</span> Course Cupid. Made with <span class="text-cupidPink">♥</span> for Otago students.</p>
        <div class="flex gap-6 text-sm">
          <a href="privacy.html" class="text-gray-500 hover:text-cupidPink transition-colors">Privacy</a>
          <a href="terms.html" class="text-gray-500 hover:text-cupidPink transition-colors">Terms</a>
          <a href="faq.html" class="text-gray-500 hover:text-cupidPink transition-colors">FAQ</a>
        </div>
      </div>
    </div>
  </footer>
  </footer>

<script src="/frontend/app.js"></script>
  <script src="server.js"></script>
    <script src="/frontend/app.js"></script>
  <script>
    async function refreshAuthUI_Safe() {
      if (typeof refreshAuthUI === 'function') return refreshAuthUI();
      try {
        const res = await fetch('/api/me', { credentials: 'same-origin' });
        const d = await res.json();
        const guest = document.getElementById('auth-guest');
        const userBox = document.getElementById('auth-user');
        if (d.loggedIn) {
          guest.classList.add('hidden');
          userBox.classList.remove('hidden');
          const name = d.user?.username || 'User';
          const userNameEl = document.getElementById('user-name');
          userNameEl.textContent = name;
          const avatar = document.getElementById('user-avatar');
          const parts = name.trim().split(/\s+/).filter(Boolean);
          const initials = parts.length === 1 ? (/[A-ZaZ]/.test(parts[0][0]) ? parts[0][0].toUpperCase() : '#') : (parts[0][0] + parts[parts.length-1][0]).toUpperCase();
          avatar.textContent = initials;
        } else {
          guest.classList.remove('hidden');
          userBox.classList.add('hidden');
        }
      } catch (e) { console.error(e); }
    }

    function initProfileMenu_Fallback() {
      if (typeof initProfileMenu === 'function') return initProfileMenu();
      const btn = document.getElementById('profile-btn');
      const menu = document.getElementById('profile-menu');
      if (!btn || !menu) return;
      const openCls = ['opacity-100','translate-y-2','scale-100','pointer-events-auto'];
      const closedCls = ['opacity-0','-translate-y-2','scale-95','pointer-events-none'];
      menu.classList.remove(...openCls); menu.classList.add(...closedCls);
      btn.setAttribute('aria-haspopup','true'); btn.setAttribute('aria-expanded','false');
      const open = () => { menu.classList.remove(...closedCls); menu.classList.add(...openCls); btn.setAttribute('aria-expanded','true'); };
      const close = () => { menu.classList.remove(...openCls); menu.classList.add(...closedCls); btn.setAttribute('aria-expanded','false'); };
      btn.addEventListener('click', e => { e.stopPropagation(); (menu.classList.contains('pointer-events-auto') ? close() : open()); });
      document.addEventListener('click', () => close());
      document.addEventListener('keydown', e => { if (e.key === 'Escape') close(); });
    }

    document.addEventListener('DOMContentLoaded', () => {
      refreshAuthUI_Safe().then(initProfileMenu_Fallback);
      document.getElementById('logout-btn')?.addEventListener('click', async () => {
        try {
          const r = await fetch('/api/logout', { method: 'POST', credentials: 'same-origin' });
          const j = await r.json();
          if (j.success) { await refreshAuthUI_Safe(); window.location = '/'; }
        } catch (err) { console.error(err); }
      });
    });
  </script>

  
</body>
</html>